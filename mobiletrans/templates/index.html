{% extends "base.html" %}


{% block extra_head %}{{ block.super }}

<script type="text/javascript">

$(document).ready(function(){

	var markersArray = [];

	var myLatlng = new google.maps.LatLng(41.875696,-87.624207);
	var myOptions = {
	  zoom: 11,
	  center: myLatlng,
	  mapTypeId: google.maps.MapTypeId.ROADMAP
	}

	var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
	    
	//var ctaLayer = new google.maps.KmlLayer('{{ url }}');
	//ctaLayer.setMap(map);

    google.maps.event.addListener(map, 'click', function(event) {
      deleteOverlays();
      addMarker(event.latLng);
	  var ctaLayer = new google.maps.KmlLayer('{{ url }}&lat=' + event.latLng.lat() + '&long=' + event.latLng.lng() );
	  ctaLayer.setMap(map);
    });
    
    
    function addMarker(location) {
    marker = new google.maps.Marker({
      position: location,
      map: map
    });
    markersArray.push(marker);
    }
    
    // Deletes all markers in the array by removing references to them
	function deleteOverlays() {
	  if (markersArray) {
	    for (i in markersArray) {
	      markersArray[i].setMap(null);
	    }
	    markersArray.length = 0;
	  }
	}

});

</script>

{% endblock extra_head %}

{% block active_index %}active{% endblock active_index %}

{% block content %}


<div class="block-box black-box-map">

<div id="map_canvas" style="width:100%; height:100%"></div>
{# <iframe width="640" height="480" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?f=q&amp;hl=en&amp;q={{ url }}&amp;ie=UTF8&amp;om=1&amp;ll=41.881944,-87.627778&amp;spn=0.006776,0.013733&amp;z=12&amp;output=embed"></iframe><br /><small><a href="http://maps.google.com/maps?f=q{}&amp;hl=en&amp;q={{ url }}&amp;ie=UTF8&amp;om=1&amp;ll=48.858193,2.289619&amp;spn=0.006776,0.013733&amp;z=17&amp;source=embed" style="color:white;text-align:left">View Larger Map</a></small>  #}

</div>


{% endblock content %}
	